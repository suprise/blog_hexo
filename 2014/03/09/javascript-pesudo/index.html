<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1"><meta name="author" content="Aeolia"><meta name="description" content="just a blog now."><title>用javascript操作伪类和伪元素 | Aeolia'Space</title><link href="/favicon.ico" rel="icon"><link rel="stylesheet" media="screen" href="/style/typo.css"><link rel="stylesheet" media="screen" href="/style/highlight.css"><link rel="stylesheet" media="screen" href="/style/index.css"></head><body><div id="header"><h1 class="title"><a id="logo" href="https://suprise.github.io/blog_hexo/"> Aeolia'Space</a></h1><ul class="nav"><li><a href="/categories/tech">技术</a></li><li class="sep"></li><li><a href="/categories/weeksum">周记</a></li><li class="sep"></li><li><a href="/categories/hobby">爱好</a></li><li class="sep"></li><li><a href="/categories/life">随笔</a></li><li class="sep"></li><li><a href="#" class="switchDataRain opening">关闭动画</a></li></ul></div><div id="article-con"><div id="search-con"><form action="https://www.baidu.com/s" method="get" accept-charset="utf-8"><input type="text" name="q1" placeholder="Search" class="search-input"><input type="hidden" name="q6" value="github.com"></form></div><article thread="/blog/2014/03/09/javascript-pesudo/" class="meta"><div class="inner"><a href="/2014/03/09/javascript-pesudo/"><h2 class="title">用javascript操作伪类和伪元素</h2></a><div class="meta"><span>&nbsp;by&nbsp;</span>Aeolia<span>&nbsp;on&nbsp;</span>2014年3月9日</div><div class="text"><p>通常而言，我们是不需要直接改变某一元素的伪类和伪元素这些cssRule的，正常的做法是切换某一元素的类，来应用预先写好的伪类和伪元素。<br>比如$(‘div’).toggleClass(‘someclass’);</p>
<p>但我还是想看看如何用javascript直接改变伪类和伪元素的内容，该怎么做呢？<br><a id="more"></a><br>为内部css时，比如<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">"text/css"</span>&gt;</span><span class="css"></span><br><span class="line">    <span class="rule"><span class="attribute">a</span>:<span class="value">hover &#123;color:blue</span></span>;&#125;</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>则可用如下方式进行修改<br>先获得CSSStyleSheet<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sheet = <span class="built_in">document</span>.styleSheets[<span class="number">0</span>] || <span class="built_in">document</span>.getElementsByTagName(‘style’)[<span class="number">0</span>].sheet;</span><br></pre></td></tr></table></figure></p>
<p>然后即可删除(sheet.removeRule(index)或sheet.deleteRule(index))和增加CSS规则(sheet.addRule(selector,text)或sheet.insertRule(selector,text))<br>注:此时sheet下有cssRules属性，cssRules下的cssRule下有cssText可用来过滤获得对应的index</p>
<p>还可以使用正则表达式来改变style的innerHTML<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/(&#125;)([\s\S]+:[\s]*hover[\s]*(,|&#123;))+[\s\S]+?&#125;/</span>; </span><br><span class="line">style.innerHTML = style.innerHTML.replace(reg,’$<span class="number">1</span>′);</span><br></pre></td></tr></table></figure></p>
<p>当为外部css时，无法用innerHTML的方式来改变其内容,也无法过滤cssText来获得对应的Index，不过removeRule等API依旧有效。</p>
<p>结论是:我还没有找到好的方法来直接操作伪类和伪元素，等以后看完标准再来看看有没有方法。</p>
</div><div class="meta tags"><span>&nbsp;tagged:&nbsp;</span><a href="/tags/JS/" class="tag">JS</a><a href="/tags/伪元素/" class="tag">伪元素</a><a href="/tags/伪类/" class="tag">伪类</a></div><hr><div id="duoshuo" data-url="https://suprise.github.io/blog_hexo/2014/03/09/javascript-pesudo/" data-thread-key="/blog/2014/03/09/javascript-pesudo/" data-title="用javascript操作伪类和伪元素" class="ds-thread"></div><script type="text/javascript">var duoshuoQuery = {short_name:'suprise'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></div></article></div><nav id="pagination"></nav><div id="footer" class="clearfix"><section class="archives col"><h4>归档</h4><div class="links-con"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">2015年4月</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">2014年3月</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">2013年10月</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">2013年8月</a><span class="archive-list-count">1</span></li></ul></div></section><section class="tag-cloud col"><h4>标签云</h4><div class="links-con"></div><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Base64/">Base64</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome扩展/">Chrome扩展</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/">JS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/伪元素/">伪元素</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/伪类/">伪类</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/周记/">周记</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/生活/">生活</a><span class="tag-list-count">1</span></li></ul></section><section class="friends col"><h4>友情链接</h4><li><a href="http://lingyu.wang"> 天镶</a></li></section></div><div class="copy-right clearfix">Test By Aeolia <span>&nbsp;|&nbsp;</span>Powered By <a href="http://zespia.tw/hexo">HEXO</a><span>&nbsp;|&nbsp;</span>SealScript Theme By <a href="lyric.im">Lyric Wai</a></div><script type="text/javascript" src="http://cdn.staticfile.org/jquery/2.1.1-rc2/jquery.min.js"></script><script type="text/javascript" src="/script/burn.js"></script><script type="text/javascript" src="/script/highlight.js"></script><script type="text/javascript" src="/script/data-rain.js"></script><script type="text/javascript">$(function () {
	hljs.configure({tabReplace: '    '});
	hljs.initHighlightingOnLoad();
	var burning_words = new PonticStar.BurningWords;
	burning_words.show("Aeolia's Matrix", "00FF00", "Times New Roman", 30, "000000", 100, "slow",'logo');
	//- $(document.body).bind('selectstart',function (event) {
	//- 	if (event.target.nodeName.toLowerCase() !== 'pre') {
	//- 		return false;
	//- 	}
	//- });

	new dataRain();
});</script></body></html>