if("undefined"==typeof PonticStar)var PonticStar={};PonticStar.BurningWords=function(){this.interval_id=null,this.palette=null,this.canvas=null,this.stop=function(){null!==this.interval_id&&clearInterval(this.interval_id)},this.show=function(text,text_color,font,font_size,bg_color,bg_alpha,speed,id){if(this.stop(),null===this.palette){this.palette=[];for(var i=0;64>i;i++)this.palette[i]=[4*i,0,0],this.palette[i+64]=[255,4*i,0],this.palette[i+128]=[255,255,4*i],this.palette[i+192]=[255,255,255]}this.font_string=font_size+"px "+font,this.text=text,this.text_color_string="rgb("+parseInt(text_color.substring(0,2),16)+","+parseInt(text_color.substring(2,4),16)+","+parseInt(text_color.substring(4,6),16)+")",this.bg_color_r=parseInt(bg_color.substring(0,2),16),this.bg_color_g=parseInt(bg_color.substring(2,4),16),this.bg_color_b=parseInt(bg_color.substring(4,6),16),this.bg_color_a=Math.floor(255*bg_alpha/100),this.bg_color_a_pct=bg_alpha/100,this.bg_color_string="rgba("+this.bg_color_r+","+this.bg_color_g+","+this.bg_color_b+","+this.bg_alpha+")";var speed_msec;if(speed&&!isNaN(Number(speed))&&null===speed.toString().match(/^\s+$/))speed_msec=speed;else switch(speed){case"x-fast":speed_msec=10;break;case"fast":speed_msec=25;break;case"slow":speed_msec=200;break;case"x-slow":speed_msec=150;break;default:case"normal":speed_msec=50}id||(id="text-burning-"+this.counter),this.counter++;var canvas_id,el=document.getElementById(id);if(el?(el.innerHTML='<canvas id="'+id+'-canvas" style="font-family:'+font+"; font-size:"+font_size+'px"></canvas>',canvas_id=id+"-canvas"):(document.write('<canvas id="'+id+'" style="font-family:'+font+"; font-size:"+font_size+'px"></canvas>'),canvas_id=id),this.canvas=document.getElementById(canvas_id),this.canvas.getContext){var dc=this.canvas.getContext("2d");dc.font=this.font_string,this.text_size=dc.measureText(text),this.canvas.width=this.text_size.width+10,this.canvas.height=Math.floor(1.5*font_size),this.fire_decay=Math.floor(3+Math.exp(3.6-font_size/7)),dc.fillStyle="rgb(0,0,0)",dc.fillRect(0,0,this.canvas.width,this.canvas.height),this.image=dc.getImageData(0,0,this.canvas.width,this.canvas.height),this.image_flame=dc.getImageData(0,0,this.canvas.width,this.canvas.height),dc.fillStyle="rgb(255,255,255)",dc.font=this.font_string,dc.textAlign="center",dc.textBaseline="bottom",dc.fillText(text,this.canvas.width/2,this.canvas.height),this.image_src=dc.getImageData(0,0,this.canvas.width,this.canvas.height),dc.putImageData(this.image,0,0);var that=this;this.interval_id=setInterval(function(){that.burn()},speed_msec)}else el.innerHTML="Canvas element is not supported"},this.burn=function(){for(var dc=this.canvas.getContext("2d"),image_data_len=this.canvas.width*this.canvas.height*4,pos=0;image_data_len>pos;pos+=4)255==this.image_src.data[pos]&&(this.image_flame.data[pos]=Math.floor(256*Math.random()));for(var incr1=4*this.canvas.width,pos=0;image_data_len-incr1>pos;pos+=4){var x=pos%incr1,l=this.image_flame.data[(0==x?pos+4:pos)-4],r=this.image_flame.data[(x==incr1-4?pos-4:pos)+4],b=this.image_flame.data[pos+incr1],avg=Math.floor((l+r+b)/3);avg>0&&(avg-=this.fire_decay),0>avg&&(avg=0),this.image_flame.data[pos]=avg}for(var pos=0;image_data_len>pos;pos+=4)if(0!=this.image_flame.data[pos]){var c=this.image_flame.data[pos],pal=this.palette,a=1-3*c/255;0>a&&(a=0),a>this.bg_color_a&&(a=this.bg_color_a),this.image.data[pos+1]=Math.min(255,pal[c][1]+Math.floor(this.bg_color_g*a))}else this.image.data[pos]=this.bg_color_r,this.image.data[pos+1]=this.bg_color_g,this.image.data[pos+2]=this.bg_color_b,this.image.data[pos+3]=this.bg_color_a;dc.putImageData(this.image,0,0),dc.fillStyle=this.text_color_string,dc.font=this.font_string,dc.textAlign="center",dc.textBaseline="bottom",dc.fillText(this.text,this.canvas.width/2,this.canvas.height)}};